import '../support/index';
import * as url from "url";
/// <reference types="Cypress" />
describe('XSS Test Suite',{ taskTimeout: 4800000 }, () => {
    it.skip('should test for reflected xss',() => {
        cy.visit('/#/login') // #/form/new-
        cy.intercept('GET', '/rest/products/**').as('interceptedRequest');
        cy.get('.close-dialog').click() // unnecessary?
        cy.get('#email').type("' or 1=1--")
        cy.get('#password').type('a')
        cy.get('#loginButton').click()
        cy.get('[style="left: 0px; width: calc((50% - 15px) * 1 + 0px); margin-top: 0px; padding-top: calc((50% - 15px) * 1 + 0px);"] > .mat-grid-tile-content > .mat-card > .mat-tooltip-trigger > .img-container > .mat-card-image').click()
        cy.get('#mat-input-3').type('yas')
        cy.get('#submitButton').click()
        cy.wait('@interceptedRequest').then((request) => {
            const test = '';
            console.log('+++++++++++++++++++++++++++++')
            cy.reflectedXSS(request, test);
        })
    })
    it('should test for reflected xss using an alternative function',() => {
        cy.visit('/#/login') // #/form/new-
        cy.intercept('GET', '/rest/products/**').as('interceptedRequest');
        cy.get('.close-dialog').click() // unnecessary?
        cy.get('#email').type("' or 1=1--")
        cy.get('#password').type('a')
        cy.get('#loginButton').click()
        const url = 'http://localhost:3000/#/track-result?id=';
        console.log('+++++++++++++++++++++++++++++')
        cy.altXSS(url);
    })
})